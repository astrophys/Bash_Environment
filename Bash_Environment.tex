% Compile by directly running 
%   pdflatex Slurm_Intro.tex 
%
%
%
%
%




\documentclass{beamer}
\usetheme{Copenhagen}
\usepackage[utf8]{inputenc}


%\usepackage{graphicx}
%\usepackage{subfigure}
%\usepackage{multimedia}
\usepackage{times}  % fonts are up to you
\usepackage{graphics}
\usepackage{amsmath}
\usepackage{media9}
\usepackage{hyperref}
\usepackage{psfrag}
\usepackage{pdfpages}
\usepackage{listings}


\setbeamertemplate{bibliography item}[text]
\newcommand{\customcite}[1]{\citeauthor{#1}, \citeyear{#1}}
\newcommand\smallFont{\fontsize{8}{7.2}\selectfont}   %Change font size.
\newcommand\mCite[1]{[\cite{#1}, \citetitle{#1}]}  %Prints name and title
\newcommand\FrameText[1]{
\begin{textblock*}{\paperwidth}(0pt,\textheight)
	\vspace{1.0cm}
    \raggedleft \smallFont #1
\end{textblock*}}

%Get rid of ugly copenhagen default symbol for enumerate
\setbeamertemplate{enumerate items}[default]   


% Create code text
% https://tex.stackexchange.com/questions/65291/code-snippet-in-text
\definecolor{codegray}{gray}{0.9}
\newcommand{\code}[1]{\colorbox{codegray}{\texttt{#1}}}



%Information to be included in the title page:
\title{Bash Environment and Managing Software}
\author{Ali Snedden}
\institute{Nationwide Children's Hospital}
\date{May 3, 2019}
 
 
 
\begin{document}
 
\frame{\titlepage}




\begin{frame}
\frametitle{How to Connect}
Windows:
\begin{itemize}
    \item Open PuTTY
    \item Window Session $\Rightarrow$ Host Name field : username@10.70.250.101
    \item Click ``Open" to log in.
    \item Enter password
\end{itemize}

Mac:
\begin{itemize}
    \item Open Terminal (Finder $\Rightarrow$ Utilities $\Rightarrow$ Terminal)
    \item \code{ssh -X username@10.70.250.101}
\end{itemize}
\end{frame}



\begin{frame}
\frametitle{Bash}
\begin{itemize}
    \item Environmental variables control what commands/libraries are available
    \pause
    \item E.g.
    \pause
    \begin{enumerate}
        \item \code{PATH} : Location shell looks for commands / executables
            \begin{itemize}
                \item Try : \code{echo \$PATH}
            \end{itemize}
        \pause
        \bigskip
        \item \code{LD\_LIBRARY\_PATH} : Where shell looks for shared libraries.
            \begin{itemize}
                \item Try : \code{echo \$LD\_LIBRARY\_PATH}
            \end{itemize}
        \pause
        \bigskip
        \item \code{PYTHONPATH} : Location python looks for modules (libraries).
            \begin{itemize}
                \item Try : \code{echo \$PYTHONPATH}
            \end{itemize}
    \pause
    \bigskip
    \item See all environmental variables try : \code{env | less}
    \end{enumerate}
\end{itemize}
\end{frame}


\begin{frame}
\frametitle{Modules}
\begin{itemize}
    \item We use modules to manage software on Baker.
    \pause
    \bigskip
    \item Try:
    \pause
    \begin{itemize}
        \item \code{module avail}
        \bigskip
        \pause
        \item \code{module load python/3.6.5}  Can put any module here
        \bigskip
        \pause
        \item \code{module list}
        \bigskip
        \pause
        \item \code{module purge}
    \end{itemize}
\end{itemize}
\end{frame}



\begin{frame}
\frametitle{Python Example}
\begin{itemize}
    \item Look at \code{/act/modulefiles/python/3.6.5}
    \pause
    \item Notice how \code{PATH} and \code{PYTHONPATH} are pre-pended.
    \pause
    \item Try:
    \begin{itemize}
        \item \code{which python}
        \pause
        \item \code{module purge}
        \pause
        \item Check how \code{PATH}, \code{PYTHONPATH} change.
        \pause
        \item \code{which python}
    \end{itemize}
\end{itemize}
\end{frame}


\begin{frame}[fragile]
\frametitle{Python Example}
With the system python (\code{/usr/bin/python}):
\begingroup
\scriptsize
\begin{lstlisting}[backgroundcolor = \color{codegray}, language = Bash, showstringspaces=false]
$ module purge
$ python
Python 2.6.6 (r266:84292, Aug 18 2016, 15:13:37)
[GCC 4.4.7 20120313 (Red Hat 4.4.7-17)] on linux2
Type "help", "copyright", "credits" or "license" for more info
>>> import numpy
>>> numpy.__file__
'/usr/lib64/python2.6/site-packages/numpy/__init__.pyc'
>>> exit()
%$ echo $PYTHONPATH
%
\end{lstlisting}
\endgroup
\end{frame}


\begin{frame}[fragile]
\frametitle{Python Example}
With the system python/3.6.5 module :
\begingroup
\scriptsize
\begin{lstlisting}[backgroundcolor = \color{codegray}, language = Bash, showstringspaces=false]
$ module load python/3.6.5
License File : see https://docs.anaconda.com/
$ python
Python 3.6.5 |Anaconda, Inc.| (default, Apr 29 2018, 16:14:56)
[GCC 7.2.0] on linux
Type "help", "copyright", "credits" or "license" for more info
>>> import numpy
>>> numpy.__file__
'/opt/python/3.6.5/lib/python3.6/site-packages/numpy/__init__.py'
>>> exit()
%$ echo $PYTHONPATH
%/opt/python/3.6.5/additional_packages/plotly/lib/python3.6/site-packages:
%/opt/python/3.6.5/additional_packages/pysam/lib/python3.6/site-packages:
%/opt/python/3.6.5/lib/python3.6/site-packages
\end{lstlisting}
\endgroup
\end{frame}


\begin{frame}
\frametitle{Python Example}
\begin{itemize}
    \item Notice when using \code{python/3.6.5} module, numpy is located within the directory \code{/opt/python/3.6.5/lib/python3.6/site-packages} specified in \code{PYTHONPATH} 
    \pause
    \item
\end{itemize}
\end{frame}


\begin{frame}
\frametitle{Python}
\begin{itemize}
    \item Notice when using \code{python/3.6.5} module, numpy is located within the directory \code{/opt/python/3.6.5/lib/python3.6/site-packages} specified in \code{PYTHONPATH} 
    \pause
    \item
\end{itemize}
\end{frame}



\end{document}
